<script>
const csrf_token = document.querySelector('meta[name="csrf-token"]').content;
const dashboard_files_directory_download_error_modal_title = '<%= t('dashboard.files_directory_download_error_modal_title') %>';
const filesPath = '<%= files_path('/') %>';
const maxFileSize = '<%= Configuration.file_upload_max %>';
const filesUploadPath = '<%= files_upload_path %>';
const transfersPath = '<%= transfers_path(format: "json") %>';

history.replaceState({
  currentDirectory: '<%= @path %>',
  currentDirectoryUrl: '<%= files_path(@path) %>',
  currentDirectoryUpdatedAt: '<%= Time.now.to_i %>'
}, null);

<% unless alert %>
// initial data load
reloadTable();
<% end %>

$(document).ready(function(){
  clipboardjs = new ClipboardJS('#copy-path');
  clipboardjs.on('success', function(e) {
    //FIXME: Have to put this in the template so it will recognize tooltip.
    
    $(e.trigger).tooltip({title: 'Copied path to clipboard!', trigger: 'manual', placement: 'bottom'}).tooltip('show');
    setTimeout(() => $(e.trigger).tooltip('hide'), 2000);
    e.clearSelection();
  });
  clipboardjs.on('error', function(e) {
    e.clearSelection();
  });
});

</script>
