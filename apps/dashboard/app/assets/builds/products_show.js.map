{
  "version": 3,
  "sources": ["../../javascript/packs/products_show.js"],
  "sourcesContent": ["'use strict';\n\nconst id = 'product_cli_modal';\nconst spinnerId = `${id}_spinner`;\nconst headerId = `${id}_header`;\nconst buttonId = `${id}_button`;\nconst closeButton = `<button id=\"${buttonId}\" class=\"close float-right\" data-dismiss=\"modal\">&times;</button>`;\n\njQuery(function(){\n  $('[data-toggle=\"cli\"]').on('click', (event) => updateModal(event));\n\n  $(`#${headerId}`).replaceWith(`\n    <h2>\n      <span>no action</pan>\n      ${closeButton}\n    </h2>\n  `);\n});\n\nfunction updateModal(event){\n  const button = $(`#${event.target['id']}`);\n  if(button === undefined || button.data() === {}) { return; }\n\n  const title = button.data('title');\n  const cmd = button.data('cmd');\n  const target = button.data('target');\n  const header = `\\$ <code><strong>${cmd}</strong></code>\\n`\n\n  $(`#${headerId}`).replaceWith(`\n    <h2>\n      <span>${title}</pan>\n      ${closeButton}\n    </h2>\n  `);\n\n  const xhr = new XMLHttpRequest;\n  xhr.onreadystatechange = function() {\n    if(this.status == 200){\n      $(`#${id} .product-cli-body`).html(`${header}${this.responseText}`);\n      $(`#${id} .product-cli-body`).scrollTop($(`#${id} .product-cli-body`)[0].scrollHeight);\n    }\n  };\n\n  xhr.onloadend = function() {\n    $(`#${spinnerId}`).replaceWith(`\n      <button class=\"close float-right\" data-dismiss=\"modal\">&times;</button>\n    `);\n    if (this.status != 200) {\n      $(`#${id} .product-cli-body`).html(`${header}A fatal error has occurred`);\n    };\n  };\n\n  xhr.open('PATCH', target);\n  xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'))\n  xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n  xhr.send();\n  // FIXMME: using window here bc modal is a bootstrap import and there are multiple\n  // $ and jQuery's out there.\n  window.jQuery(`#${id}`).modal('show');\n}\n"],
  "mappings": ";;;AAEA,MAAM,KAAK;AACX,MAAM,YAAY,GAAG;AACrB,MAAM,WAAW,GAAG;AACpB,MAAM,WAAW,GAAG;AACpB,MAAM,cAAc,eAAe;AAEnC,SAAO,WAAU;AACf,MAAE,qBAAqB,EAAE,GAAG,SAAS,CAAC,UAAU,YAAY,KAAK,CAAC;AAElE,MAAE,IAAI,UAAU,EAAE,YAAY;AAAA;AAAA;AAAA,QAGxB;AAAA;AAAA,GAEL;AAAA,EACH,CAAC;AAED,uBAAqB,OAAM;AACzB,UAAM,SAAS,EAAE,IAAI,MAAM,OAAO,OAAO;AACzC,QAAG,WAAW,UAAa,OAAO,KAAK,MAAM,CAAC,GAAG;AAAE;AAAA,IAAQ;AAE3D,UAAM,QAAQ,OAAO,KAAK,OAAO;AACjC,UAAM,MAAM,OAAO,KAAK,KAAK;AAC7B,UAAM,SAAS,OAAO,KAAK,QAAQ;AACnC,UAAM,SAAS,mBAAoB;AAAA;AAEnC,MAAE,IAAI,UAAU,EAAE,YAAY;AAAA;AAAA,cAElB;AAAA,QACN;AAAA;AAAA,GAEL;AAED,UAAM,MAAM,IAAI;AAChB,QAAI,qBAAqB,WAAW;AAClC,UAAG,KAAK,UAAU,KAAI;AACpB,UAAE,IAAI,sBAAsB,EAAE,KAAK,GAAG,SAAS,KAAK,cAAc;AAClE,UAAE,IAAI,sBAAsB,EAAE,UAAU,EAAE,IAAI,sBAAsB,EAAE,GAAG,YAAY;AAAA,MACvF;AAAA,IACF;AAEA,QAAI,YAAY,WAAW;AACzB,QAAE,IAAI,WAAW,EAAE,YAAY;AAAA;AAAA,KAE9B;AACD,UAAI,KAAK,UAAU,KAAK;AACtB,UAAE,IAAI,sBAAsB,EAAE,KAAK,GAAG,kCAAkC;AAAA,MAC1E;AAAC;AAAA,IACH;AAEA,QAAI,KAAK,SAAS,MAAM;AACxB,QAAI,iBAAiB,gBAAgB,EAAE,yBAAyB,EAAE,KAAK,SAAS,CAAC;AACjF,QAAI,iBAAiB,oBAAoB,gBAAgB;AACzD,QAAI,KAAK;AAGT,WAAO,OAAO,IAAI,IAAI,EAAE,MAAM,MAAM;AAAA,EACtC;",
  "names": []
}
